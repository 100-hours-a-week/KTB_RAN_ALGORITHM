## ìš°ì„ ìˆœìœ„ íì™€ í™
> ìš°ì„ ìˆœìœ„ í
- ì¼ë°˜ íì™€ ë‹¬ë¦¬ ê°’ì˜ ìš°ì„ ìˆœìœ„ì— ë”°ë¼ ë¨¼ì € ë‚˜ê°€ëŠ” ìë£Œêµ¬ì¡°
> í™(Heap)
- ìš°ì„ ìˆœìœ„ íë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ êµ¬í˜„í•˜ê¸° ìœ„í•œ ì™„ì „ ì´ì§„ íŠ¸ë¦¬ ê¸°ë°˜
- í™ìœ¼ë¡œ ìš°ì„ ìˆœìœ„ íê°€ êµ¬í˜„ëœë‹¤.
- ë°°ì—´ë¡œ í‘œí˜„ ê°€ëŠ¥ : ì¸ë±ìŠ¤ë¡œ ë¶€ëª¨-ìì‹ ê´€ê³„ ê³„ì‚° ê°€ëŠ¥
  - ì‹œê°„ë³µì¡ë„ : ì‚½ì…/ì‚­ì œ â†’ O(log N)

- í ë°°ì—´ì•ˆì€ ê¸°ë³¸ì ìœ¼ë¡œ ì •ë ¬ë˜ì–´ìˆì§€ ì•Šë‹¤.
  - í™ êµ¬ì¡°ì—ì„œ ì •ë ¬ë˜ì–´ìˆëŠ” ê²ƒì„ ê¸°ì¤€ìœ¼ë¡œ í–ˆê¸° ë•Œë¬¸

ë£¨íŠ¸ ê°’ì— ë”°ë¼ ì¢…ë¥˜ 2ê°€ì§€
1. ìµœì†Œí™
  1. ë¶€ëª¨ â‰¤ ìì‹ : í•­ìƒ ë£¨íŠ¸ê°€ ìµœì†Ÿê°’ì´ë‹¤.
2. ìµœëŒ€í™
  1. ë¶€ëª¨ â‰¥ ìì‹ : í•­ìƒ ë£¨íŠ¸ê°€ ìµœëŒ“ê°’ì´ë‹¤.
![](./assets/2026-02-28_algo_ìš°ì„ ìˆœìœ„-íì™€-í™/heap-types.png)
> ìµœì†Œí™ì˜ ì‚­ì œ
1. ë£¨íŠ¸ë…¸ë“œ ì‚­ì œ
2. ë§ˆì§€ë§‰ ë¦¬í”„ë…¸ë“œë¥¼ ë£¨íŠ¸ë…¸ë“œë¡œ ì˜¬ë¦°ë‹¤.
3. (íƒ‘ë‹¤ìš´)ë¹„êµë¥¼ í†µí•´ ì•„ë˜ë¡œ ë‚´ë ¤ê°„ë‹¤.
  1. ë¶€ëª¨ â‰¤ ìì‹ 
  2. ë¹„êµë¥¼ í†µí•´ ë‚´ë ¤ê°„ë‹¤.

> ìµœì†Œí™ì˜ ì‚½ì…
1. ë§ˆì§€ë§‰ ë¦¬í”„ë…¸ë“œì— ì¶”ê°€í•œë‹¤.
2. (ë°”í…€ì—…)ë¹„ë£Œë¥¼ í†µí•´ ìœ„ë¡œ ì˜¬ë¼ê°„ë‹¤.
  1. ë¶€ëª¨ â‰¤ ìì‹
  2. í•­ìƒ ì™¼ìª½ë¶€í„° ì˜¤ë¥¸ìª½ìœ¼ë¡œ

### ë…¸ë“œì˜ ì¸ë±ìŠ¤ ê°’ êµ¬í•˜ê¸°.
- ë…¸ë“œì˜ ì¸ë±ìŠ¤ iì˜ ì™¼ìª½ ìì‹ : 2\*i + 1
- ë…¸ë“œì˜ ì¸ë±ìŠ¤ iì˜ ì˜¤ë¥¸ìª½ ìì‹ : 2\*i + 2
- ë…¸ë“œì˜ ì¸ë±ìŠ¤ iì˜ ë¶€ëª¨ : Math.floor((i-1)/2)
```javascript
// ex)
// ë°°ì—´ ì¸ë±ìŠ¤:[0, 1, 2, 3, 4]
// ê°’: [10, 15, 20, 17, 25]
10
/ \
15 20
/ \
17 25
```


> â“Â ì™œ í™ì´ ìš°ì„ ìˆœìœ„ íë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ì‹ì¸ê±¸ê¹Œ?
> ---
> - extract :
> - â† 10(0)\[ì‚­ì œ\] \| 15(1) \| 20(2) \| 17(3) \| 25(4)
> - insert :
> - 10(0) \| 15(1) \| 20(2) \| 17(3) \| 25(4) \| 27(5)\[ì¶”ê°€\] â†
> â†’ í˜•íƒœ ìì²´ëŠ” ë°°ì—´ì´ í í˜•íƒœì´ë‹¤.

### ì¸ë±ìŠ¤ë¥¼ êµ¬í•˜ëŠ” ê³µì‹ ì´ìœ 
- depthë¡œ ë‚´ë ¤ê°ˆìˆ˜ë¡ 2ì˜ nì œê³±
  â†’ ë…¸ë“œ í•˜ë‚˜ë‹¹ 2ê°œì˜ ìì‹ì´ ìˆê¸° ë•Œë¬¸ì´ë‹¤.
- ì „ì œì¡°ê±´ : í™ì€ ì™„ì „ ì´ì§„ íŠ¸ë¦¬ì´ê¸° ë•Œë¬¸ì— ë§ˆì§€ë§‰ ìš”ì†Œë¥¼ ì œì™¸í•˜ê³  í•­ìƒ ê½‰ ì°¨ìˆë‹¤.
- Depth 0 1 2ì¼ë•Œ,
  - depth = 0 : 2\^0 = 1ê°œ ì¡´ì¬, í•´ë‹¹ ì¸µì˜ ì‹œì‘ ë…¸ë“œì˜ ì¸ë±ìŠ¤ëŠ” 2\^0 = 0
  - depth = 1 : 2\^1 = 2ê°œ ì¡´ì¬, í•´ë‹¹ ì¸µì˜ ì‹œì‘ ë…¸ë“œì˜ ì¸ë±ìŠ¤ëŠ” 2\^1-1 = 1
  - depth = 2 : 2\^2 = 4ê°œ ì¡´ì¬, í•´ë‹¹ ì¸µì˜ ì‹œì‘ ë…¸ë“œì˜ ì¸ë±ìŠ¤ëŠ” 2\^2-1 = 3
    - í•­ìƒ ì‹œì‘ë…¸ë“œì˜ ì¸ë±ìŠ¤ì— -1ì¸ ì´ìœ ëŠ” ì¸ë±ìŠ¤ëŠ” 0ë¶€í„° ì‹œì‘í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
  - 2\^depth - 1 = ì‹œì‘ë…¸ë“œ ì¸ë±ìŠ¤ \| 2\^depth = í•´ë‹¹ ì¸µ ë…¸ë“œ ê°¯ìˆ˜

> ì˜ˆì‹œ)
> i = 5ì¼ë•Œ, 2\^2-1 \< 5 \< 2\^3-1 ì´ê¸° ë•Œë¬¸ì—, 5ê°€ ìˆëŠ” 2ì¸µì€ 3 4 5 6 ì´ë‹¤.
> í•´ë‹¹ ì¸µì— 5 ì•ì— ìˆëŠ” ë…¸ë“œëŠ” 2ê°œê³  í•´ë‹¹ ë…¸ë“œì´ê¸° ë•Œë¬¸ì— ë‹¤ìŒì¸µì— ë²ˆì‹ë˜ì–´ ìƒê¸´ ë…¸ë“œëŠ” 4ê°œì¼í…Œì§€.
> ë•Œë¬¸ì— ì´ë²ˆ ì¸µì˜ ë§ˆì§€ë§‰ ë…¸ë“œì¸ 6ë²ˆ + 4 ì´í›„ ë‹¤ìŒ ì¸ë±ìŠ¤ê°€ 5ì˜ ìì‹ì´ë‹¤.
> â†’ ìˆ˜ì‹ìœ¼ë¡œ ë‚˜íƒ€ë‚´ë©´, 2\*i+1

---
### ì˜ˆì œ ì½”ë“œ
ìµœì†Œ í™
> ### ğŸ’¡Â ì •ë¦¬
> ---
> - extractMinì€ ë°˜í™˜ê°’ì¡´ì¬ ! ê°€ì¥ ìµœëŒ€/ìµœì†Ÿê°’ì„ ë°˜í™˜í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤.
> - heapifyDown() ì‚¬ìš©
> - ë‚´ë ¤ê°€ì•¼ ë˜ê¸°ë•Œë¬¸ì— ìì‹ íƒìƒ‰ (leftChildIndex, rightChildIndex) í•„ìš”
> - insertëŠ” ì‚½ì…í•œë‹¤.
> - heapifyUp() ì‚¬ìš©
> - ì˜¬ë¼ê°€ì•¼ë˜ê¸° ë•Œë¬¸ì— ë¶€ëª¨ íƒìƒ‰ (parentIndex) í•„ìš”
> - heapifyUp/Down ë‘˜ë‹¤ breakì¡°ê±´ ì¡´ì¬

```javascript
class MinHeap{
  constructor(){
    this.heap = [];
  }
  insert(value){
    this.heap.push(value)
    this.heapifyUp();

  }
  swap(i,j){
    [this.heap[i], this.heap[j]]=[this.heap[j], this.heap[i]];
  }
  extractMin(){
    if(this.heap.length === 0) return null;
    if(this.heap.length === 1) return this.heap.pop();

    const min = this.heap[0];

    this.heap[0] = this.heap.pop();

    this.heapifyDown();
    return min;
  }
  heapifyUp(){
    let index = this.heap.length-1;

    while(index>0){
      //1. ë¶€ëª¨ ì¸ë±ìŠ¤ í™•ì¸í•˜ê¸°
      const parentIndex = Math.floor((index-1)/2);

      //1-1. ë¶€ëª¨ë³´ë‹¤ ìì‹ì´ ë” í¬ë©´ ìŠ¤íƒ‘
      if(this.heap[parentIndex] <= this.heap[index]) break;

      //1-2. ê·¸ê²Œ ì•„ë‹ˆë¼ë©´ ë¶€ëª¨ì™€ ìì‹ ìœ„ì¹˜ë¥¼ ë°”ê¾¼ë‹¤.
      this.swap(parentIndex, index);

      index = parentIndex
    }
  }
  heapifyDown(){
    let currentIndex = 0;
    const length = this.heap.length;

    while(true){
      let minIndex = currentIndex;
      const leftIndex = currentIndex * 2 + 1;
      const rightIndex = currentIndex * 2 + 2;


      //1. íƒìƒ‰ :  minIndex ë©”ëª¨ë¦¬ì— ì‘ì€ ê°’ ë„£ì–´ë‘ê¸°
      if(leftIndex < length && this.heap[leftIndex] < this.heap[minIndex]){
        minIndex = leftIndex;
      }
      if(rightIndex < length && this.heap[rightIndex] < this.heap[minIndex]){
        minIndex = rightIndex;
      }

      if(minIndex === currentIndex) break;

      //2. ìë¦¬ë°”ê¾¸ê¸° : í™•ì • ì‹œ ìë¦¬ ë°”ê¾¸ê¸°
      this.swap(minIndex, currentIndex);
      currentIndex = minIndex;
    }
  }
}
```

ìµœëŒ€ í™
- ì•„ë˜ë¡œ ë‚´ë ¤ê°ˆìˆ˜ë¡ ìˆ«ìê°€ ì‘ì•„ì§„ë‹¤.
```javascript
class MaxHeap {
  constructor() {
    this.heap = [];
  }

  insert(value) {
    this.heap.push(value);
    this.heapifyUp();
  }

  swap(i, j) {
    [this.heap[i], this.heap[j]] = [this.heap[j], this.heap[i]];
  }

  extractMax() {
    if (this.heap.length === 0) return null;
    if (this.heap.length === 1) return this.heap.pop();

    const max = this.heap[0];

    // ë§ˆì§€ë§‰ ë…¸ë“œë¥¼ ë£¨íŠ¸ë¡œ ì˜¬ë¦¼
    this.heap[0] = this.heap.pop();

    // ì•„ë˜ë¡œ ë‚´ë ¤ê°€ë©´ì„œ ì •ë ¬
    this.heapifyDown();

    return max;
  }

  heapifyUp() {
    let currentIndex = this.heap.length - 1;

    while (index > 0) {
      const parentIndex = Math.floor((currentIndex - 1) / 2);

      // ìµœì†Œ í™ê³¼ ë°˜ëŒ€: ë¶€ëª¨ê°€ ë” í¬ë©´ ë©ˆì¶¤
      if (this.heap[parentIndex] >= this.heap[currentIndex]) break;

      this.swap(parentIndex, currentIndex);
      currentIndex = parentIndex;
    }
  }

  heapifyDown() {
    let currentIndex = 0;
    const length = this.heap.length;

    while (true) {
      let maxIndex = currentIndex;
      const leftIndex = 2 * currentIndex + 1;
      const rightIndex = 2 * currentIndex + 2;

      //ìµœì†Œ í™ê³¼ ë°˜ëŒ€ ë¹„êµ
      if (leftIndex < length && this.heap[leftIndex] > this.heap[maxIndex]) {
        maxIndex = leftIndex;
      }

      if (rightIndex < length && this.heap[rightIndex] > this.heap[maxIndex]) {
        maxIndex = rightIndex;
      }

      if (maxIndex === currentIndex) break;

      this.swap(maxIndex, currentIndex);
      currentIndex = maxIndex;
    }
  }
}

```
---
### ì½”í…Œì—ì„œ ìµœëŒ€í™ê³¼ ìµœì†Œí™ì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•
- ìµœëŒ€í™ì„ êµ¬í˜„í•˜ê³ 
  - ë„£ì„ ë•Œ -ë¥¼ ë¶™ì¸ë‹¤.
  - ì˜ˆì‹œ :
    - minHeap.insert(-value);
    - const max = -minHeap.extractMin();

  ```javascript
5, 3, 10
-> -5 -3 -10
ìµœì†Œí™ : 3ì´ ê°€ì¥ ì‘ì§€ë§Œ
ìµœëŒ€í™ì—ì„œëŠ” : -10ì´ ê°€ì¥ ì‘ë‹¤.
  ```

---
